{% extends "base.html" %}

{% block title %}Companies{% endblock %}

{% block content %}
<div class="-mx-6 px-6 py-10 min-h-[70vh] bg-gradient-to-b from-slate-100 via-blue-50 to-slate-100">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">Explore Companies</h1>
    <p class="text-slate-600 mb-8">Discover great companies hiring in your field</p>

    {% if companies %}
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {% for company in companies %}
          <article class="bg-white/95 backdrop-blur shadow-md rounded-2xl p-6 border border-slate-100 hover:shadow-lg transition">
            <!-- Company Logo / Avatar -->
            <div class="flex items-center gap-4 mb-4">
              {% if company.company_logo %}
                <img src="{{ company.company_logo.url }}" alt="{{ company.company_name }}" 
                     class="w-16 h-16 rounded-full object-cover">
              {% else %}
                <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center">
                  <span class="text-2xl">üè¢</span>
                </div>
              {% endif %}

              <div class="flex-1">
                <h2 class="text-lg font-semibold text-slate-900">
                  {{ company.company_name|default:company.user.username }}
                </h2>
                <p class="text-sm text-slate-600">{{ company.job_count }} active job{{ company.job_count|pluralize }}</p>
              </div>
            </div>

            <!-- Company Description -->
            {% if company.company_description %}
              <p class="text-sm text-slate-700 mb-4 line-clamp-3">
                {{ company.company_description }}
              </p>
            {% endif %}

            <!-- Company Website -->
            {% if company.company_website %}
              <p class="text-xs text-slate-600 mb-4">
                <a href="{{ company.company_website }}" target="_blank" class="text-blue-600 hover:text-blue-700">
                  üîó {{ company.company_website|truncatewords:3 }}
                </a>
              </p>
            {% endif %}

            <!-- View Company Button -->
            <a href="{% url 'company_detail' company.id %}" 
               class="inline-block w-full text-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition">
              View Company & Jobs
            </a>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <div class="bg-white/95 backdrop-blur shadow-md rounded-2xl p-12 border border-slate-100 text-center">
        <p class="text-slate-600 text-lg font-medium">No companies found with active jobs.</p>
        <a href="{% url 'job_list' %}" class="text-blue-600 hover:text-blue-700 text-sm mt-2 inline-block">
          Browse all jobs ‚Üí
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% endblock %}
